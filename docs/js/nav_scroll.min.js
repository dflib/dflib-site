"use strict";var userScrolling=!1;function scrollToSectionAndCheckEnd(e,t){var r=e.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:r,behavior:"smooth"});var o,n=-1,c=function(){n===window.pageYOffset||window.innerHeight+window.pageYOffset>=document.body.offsetHeight?(document.querySelectorAll(".sectlevel1 a.active")?.forEach((e=>{e.classList.remove("active")})),userScrolling=!1,t.classList.add("active"),cancelAnimationFrame(o)):(n=window.pageYOffset,o=requestAnimationFrame(c))};o=requestAnimationFrame(c)}window.addEventListener("load",(()=>{var e=document.querySelectorAll(".tracked-section"),t=document.querySelector(".sectlevel1");e&&e.forEach((e=>{createObserver(e)})),t&&t.addEventListener("click",(e=>{e.preventDefault(),userScrolling=!0;var t=e.target.closest("a");t&&requestAnimationFrame((()=>{var e=t.getAttribute("href").slice(1);scrollToSectionAndCheckEnd(document.getElementById(e),t)}))}))}));var createObserver=e=>{var t={root:document,rootMargin:"-5% 0px -90% 0px"};new IntersectionObserver(handleIntersect,t).observe(e)},handleIntersect=e=>{e.forEach((e=>{e.isIntersecting&&!userScrolling&&requestAnimationFrame((()=>toggleActive(e)))}))},toggleActive=e=>{var t=e.target.id,r=document.querySelector(".sectlevel1 a.active"),o=document.querySelector(`.sectlevel1 a[href="#${t}"]`);r?.classList.remove("active"),o?.classList.add("active"),window.innerWidth>768&&o&&o.addEventListener("transitionend",(()=>{scrollToActive(o)}),{once:!0})},scrollToActive=e=>{var t=document.querySelector("#toc"),r=e.getBoundingClientRect().bottom;Promise.resolve(1).then((()=>{(r>=t.offsetHeight-50||r<=80)&&e.scrollIntoView({block:"center",behavior:"auto"})}))};